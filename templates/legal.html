{% extends "base.html" %}

{% block title %}legal | YourToolQuizz{% endblock %}

{% block extra_css %}
  <style>
    :root {
      --bg: #f8fafc;
      --card-bg: #ffffff;
      --border: #e2e8f0;
      --primary: #2563eb;
      --primary-hover: #1d4ed8;
      --text: #1e293b;
      --muted: #64748b;
      --radius: 10px;
      --sidebar-width: 320px;
      --gap: 20px;
      --glass: rgba(255,255,255,0.6);
    }
html,body {
  height: 100%;
  margin: 0;
  font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  color: var(--text);
  background: linear-gradient(180deg,#f6fbff 0%,var(--bg) 100%);
}

a{color:inherit;text-decoration:none}

.app {
  display: grid;
  grid-template-columns: var(--sidebar-width) 1fr;
  gap: var(--gap);
  padding: 24px;
  height: 100vh;
  box-sizing: border-box;
  align-items: start;
}

/* Sidebar legal (ahora a la izquierda) */
.sidebar {
  height: calc(100vh - 48px);
  background: linear-gradient(180deg, rgba(255,255,255,0.95), rgba(255,255,255,0.9));
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 18px;
  overflow: auto;
  position: sticky;
  top: 24px;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.search {
  display: flex;
  gap: 8px;
  align-items: center;
  padding: 8px;
  border: 1px solid var(--border);
  border-radius: 12px;
  background: var(--glass);
}
.search input {
  border: none;
  background: transparent;
  outline: none;
  font-size: 14px;
  color: var(--text);
  width: 100%;
}

.sections {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-top: 6px;
}

.section-btn {
  display: flex;
  gap: 10px;
  align-items: flex-start;
  padding: 10px;
  border-radius: 10px;
  border: 1px solid transparent;
  cursor: pointer;
}

.section-btn:hover {
  background: linear-gradient(90deg, rgba(37,99,235,0.06), rgba(29,78,216,0.03));
}
.section-btn.active {
  background: linear-gradient(90deg, rgba(37,99,235,0.12), rgba(29,78,216,0.06));
  border-color: rgba(37,99,235,0.12);
}

.section-title {
  font-weight: 600;
  font-size: 14px;
}
.section-small {
  font-size: 12px;
  color: var(--muted);
}

.main {
  background: transparent;
  display: flex;
  flex-direction: column;
  gap: 16px;
  overflow: auto;
  padding-right: 6px;
}

.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.page-title {
  font-size: 20px;
  font-weight: 700;
}
.subtitle {
  color: var(--muted);
  font-size: 13px;
}

.content-card {
  background: var(--card-bg);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 20px;
  box-shadow: 0 6px 18px rgba(15,23,42,0.03);
}

.doc {min-height:60vh}
.doc h2 {margin-top:0}
.doc p {line-height:1.6;color:var(--text)}
.doc .meta {color:var(--muted);font-size:13px;margin-bottom:12px}

footer {
  color: var(--muted);
  font-size: 13px;
  text-align: center;
  padding: 10px;
}

@media (max-width:1000px){
  .app{grid-template-columns:1fr}
  .sidebar{display:none}
}


  </style>
{%endblock%}
{%block content%}

<body>
  <div class="app" role="application">
    <aside class="sidebar" aria-label="√çndice legal">
      <div style="display:flex;align-items:center;gap:10px;">
        <div style="font-weight:700">Documentos legales</div>
        <div style="flex:1"></div>
      </div>

```
  <div class="search" role="search">
    <span>üîç</span>
    <input id="search" placeholder="Buscar (ej: privacidad, cookies, GDPR)..." aria-label="Buscar documentos legales" />
  </div>

  <div class="sections" id="sections" role="list">
    <!-- botones generados por JS -->
  </div>

  <div style="margin-top:8px;color:var(--muted);font-size:13px">
    Consejo: usa el campo de b√∫squeda para filtrar r√°pidamente.
  </div>
</aside>

<main class="main" id="main">
  <div class="header">
    <div>
      <div class="page-title">Centro Legal ‚Äî YourToolQuizz</div>
      <div class="subtitle">Toda la documentaci√≥n legal organizada en un √∫nico lugar.</div>
    </div>
  </div>

  <div class="content-card">
    <div id="doc" class="doc">
      <h2>Bienvenido al Centro Legal</h2>
      <div class="meta">Seleccione un apartado de la columna izquierda para leerlo.</div>
      <p>Este archivo HTML contiene una serie de documentos legales ficticios pensados para servir como plantilla. Puedes filtrar los apartados, navegar entre ellos y copiar el contenido desde el navegador para adaptarlo a tu proyecto.</p>
    </div>
  </div>

  <footer>¬© YourToolQuizz ‚Äî Plantilla legal</footer>
</main>
```
{%endblock %}
  </div>

{%block extra_js %}
  <script>
    const docs = [
      {id:'terms', title:'T√©rminos de Servicio', summary:'Reglas y condiciones para el uso del servicio.', content:`<div class="meta">√öltima actualizaci√≥n: 1 de octubre de 2025</div>
<p>Estos T√©rminos de Servicio regulan el uso de la plataforma YourToolQuizz ("la Plataforma").</p>`},
      {id:'privacy', title:'Pol√≠tica de Privacidad', summary:'C√≥mo tratamos tus datos personales.', content:`<div class="meta">√öltima actualizaci√≥n: 15 de septiembre de 2025</div>
<p>En YourToolQuizz respetamos tu privacidad.</p>`},
      {id:'cookies', title:'Pol√≠tica de Cookies', summary:'Uso de cookies y tecnolog√≠as similares.', content:`<div class="meta">√öltima actualizaci√≥n: 27 de agosto de 2025</div>
<p>Utilizamos cookies para mejorar la experiencia.</p>`}
    ];

    const sectionsEl = document.getElementById('sections');
    const docEl = document.getElementById('doc');
    const searchInput = document.getElementById('search');

    function createList(items){
      sectionsEl.innerHTML = '';
      for(const d of items){
        const btn = document.createElement('button');
        btn.className = 'section-btn';
        btn.setAttribute('data-id', d.id);
        btn.setAttribute('role','listitem');
        btn.innerHTML = `<div style="flex:1"><div class="section-title">${d.title}</div><div class="section-small">${d.summary}</div></div>`;
        btn.addEventListener('click',()=>{ renderDocById(d.id); });
        sectionsEl.appendChild(btn);
      }
    }

    function renderDocById(id){
      const d = docs.find(x=>x.id===id);
      if(!d) return;
      docEl.innerHTML = `<h2>${d.title}</h2>${d.content}`;
      highlightActive(id);
      history.replaceState(null,'',`#${id}`);
      docEl.scrollTop = 0;
    }

    function highlightActive(id){
      document.querySelectorAll('.section-btn').forEach(b=>{
        b.classList.toggle('active', b.getAttribute('data-id')===id);
      });
    }

    searchInput.addEventListener('input',(e)=>{
      const q = e.target.value.trim().toLowerCase();
      const filtered = docs.filter(d=> (d.title + ' ' + d.summary + ' ' + d.content).toLowerCase().includes(q));
      createList(filtered);
      if(filtered.length===1){ renderDocById(filtered[0].id); }
    });

    createList(docs);

    const hash = location.hash.replace('#','');
    if(hash && docs.some(x=>x.id===hash)){ renderDocById(hash); }
  </script>
{% endblock %}
